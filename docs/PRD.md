# PRD: 공학용 전자계산기 웹 애플리케이션

## 1. 프로젝트 개요

### 1.1 프로젝트 목적
현대적이고 직관적인 UI/UX를 갖춘 공학용 전자계산기 웹 애플리케이션을 개발하여, 학생, 엔지니어, 연구원 등이 복잡한 수학 계산을 웹 브라우저에서 쉽게 수행할 수 있도록 한다.

### 1.2 프로젝트 배경
- 기존 계산기 앱들은 모바일 중심이거나 구식 디자인을 사용
- 웹 기반 공학용 계산기의 필요성 증가
- 다크모드 지원 및 반응형 디자인에 대한 사용자 요구 증가
- 크로스 플랫폼 접근성 확보 필요

### 1.3 목표 사용자
- **학생**: 수학, 물리, 공학 과목 학습 및 과제 수행
- **엔지니어**: 현장 계산 및 설계 작업
- **연구원**: 데이터 분석 및 수식 검증
- **일반 사용자**: 복잡한 수학 계산이 필요한 모든 사용자

## 2. 제품 비전

### 2.1 핵심 가치 제안
- **접근성**: 어떤 디바이스에서든 웹 브라우저만 있으면 사용 가능
- **현대적 디자인**: 다크모드 지원 및 세련된 UI/UX
- **강력한 기능**: 기본 연산부터 삼각함수, 로그 등 공학용 함수 지원
- **사용자 경험**: 직관적인 인터페이스와 부드러운 애니메이션

### 2.2 성공 지표
- 사용자 만족도: 4.5/5.0 이상
- 계산 정확도: 99.99% 이상
- 페이지 로딩 시간: 2초 이내
- 모바일 반응성: 모든 주요 디바이스에서 정상 작동

## 3. 기능 요구사항

### 3.1 핵심 기능

#### 3.1.1 기본 연산 기능
- **사칙연산**: 덧셈(+), 뺄셈(−), 곱셈(×), 나눗셈(÷)
- **숫자 입력**: 0-9 숫자 버튼
- **소수점**: 소수점(.) 입력
- **백분율**: 퍼센트(%) 계산

#### 3.1.2 공학용 함수
- **삼각함수**: sin, cos, tan
- **로그함수**: log (상용로그), ln (자연로그)
- **지수함수**: x² (제곱)
- **상수**: π (파이)
- **괄호**: ( ) 연산 우선순위 지정

#### 3.1.3 계산기 제어
- **AC (All Clear)**: 모든 입력 및 결과 초기화
- **Backspace**: 마지막 입력 문자 삭제
- **= (Equal)**: 계산 실행 및 결과 표시
- **ANS (Answer)**: 이전 계산 결과 재사용

#### 3.1.4 모드 전환
- **각도 모드**: DEG (도), RAD (라디안), GRAD (그라디안) 전환
- **MODE 버튼**: 각도 단위 변경

### 3.2 사용자 인터페이스

#### 3.2.1 레이아웃 구조
```
┌─────────────────────────────────┐
│  [Menu]  [Scientific]  [History]│ ← Top App Bar
├─────────────────────────────────┤
│                                 │
│     Previous Calculations       │ ← History Hint
│     sin(45) = 0.707            │
│     150 ÷ 3 = 50               │
│                                 │
│     (12 + 5) × sin(30)         │ ← Current Expression
│                                 │
│            8.5                  │ ← Result Display
│                                 │
├─────────────────────────────────┤
│  ─────                          │ ← Drag Handle
│                                 │
│  [DEG][sin][cos][tan][π]       │ ← Scientific Functions
│  [x²][log][ln][(][)]           │
│  ─────────────────────────────  │
│  [AC][⌫][%][÷]                 │ ← Standard Numpad
│  [7][8][9][×]                  │
│  [4][5][6][−]                  │
│  [1][2][3][+]                  │
│  [0][.][ANS][=]                │
└─────────────────────────────────┘
```

#### 3.2.2 디스플레이 영역
- **이전 계산 기록**: 최근 2개 계산 결과 표시 (옵션, 작은 화면에서는 숨김)
- **현재 수식**: 입력 중인 수식 표시 (3xl~4xl 크기, 회색 텍스트)
- **결과**: 계산 결과 표시 (6xl~7xl 크기, 굵은 텍스트)
- **자동 스크롤**: 긴 수식/결과는 가로 스크롤 지원

#### 3.2.3 버튼 레이아웃
**공학용 함수 영역** (5열 그리드)
- Row 1: DEG, sin, cos, tan, π
- Row 2: x², log, ln, (, )

**구분선**

**표준 계산기 영역** (4열 그리드)
- Row 1: AC, ⌫, %, ÷
- Row 2: 7, 8, 9, ×
- Row 3: 4, 5, 6, −
- Row 4: 1, 2, 3, +
- Row 5: 0, ., ANS, =

### 3.3 디자인 시스템

#### 3.3.1 색상 팔레트
**라이트 모드**
- Primary: `#135bec` (파란색)
- Background: `#f6f6f8` (밝은 회색)
- Surface: `#ffffff` (흰색)
- Text Primary: `#0f172a` (거의 검정)
- Text Secondary: `#64748b` (회색)

**다크 모드**
- Primary: `#135bec` (파란색)
- Background: `#101622` (진한 남색)
- Surface: `#192233` (어두운 남색)
- Surface Highlight: `#232d42` (밝은 남색)
- Text Primary: `#ffffff` (흰색)
- Text Secondary: `#94a3b8` (밝은 회색)

**기능별 색상**
- AC 버튼: 빨간색 계열 (`#dc2626` / `#ef4444`)
- 연산자 버튼: Primary 색상 배경 (10%~20% 투명도)
- 숫자 버튼: 흰색/Surface 배경 + 테두리
- 공학 함수: Surface 배경

#### 3.3.2 타이포그래피
- **폰트 패밀리**: Space Grotesk (sans-serif)
- **결과 표시**: 6xl~7xl, font-weight: 700 (bold)
- **수식 표시**: 3xl~4xl, font-weight: 400 (normal)
- **버튼 텍스트**: 
  - 숫자: 2xl, font-weight: 500 (medium)
  - 연산자: 2xl, font-weight: 700 (bold)
  - 함수: sm, font-weight: 600 (semibold)

#### 3.3.3 간격 및 레이아웃
- **버튼 간격**: 0.75rem (12px)
- **패딩**: 
  - 컨테이너: 1rem (16px)
  - 디스플레이 영역: 1.5rem (24px)
- **Border Radius**:
  - 버튼: 0.75rem~1rem (12px~16px)
  - 컨트롤 컨테이너: 2rem (32px, 상단만)
- **버튼 비율**: 
  - 숫자/연산자: aspect-ratio 5:4 (모바일) ~ 16:9 (데스크톱)
  - 공학 함수: 고정 높이 3rem (48px)

#### 3.3.4 인터랙션
- **Hover 효과**: 
  - 밝기 증가 (brightness: 110%)
  - 배경색 변경 (opacity 증가)
- **Active 효과**: scale(0.95) - 버튼 클릭 시 축소
- **Transition**: all 0.2s ease - 부드러운 전환
- **Ripple 효과**: (선택사항) 클릭 시 물결 효과

### 3.4 반응형 디자인

#### 3.4.1 브레이크포인트
- **Mobile**: < 640px
- **Tablet**: 640px ~ 1024px
- **Desktop**: > 1024px

#### 3.4.2 적응형 레이아웃
- **최대 너비**: 448px (max-w-md) - 중앙 정렬
- **최소 높이**: 884px 또는 100dvh
- **이전 계산 기록**: 640px 이하에서는 숨김
- **텍스트 크기**: 화면 크기에 따라 조정 (sm: 접두사 사용)

### 3.5 추가 기능 (우선순위 낮음)

#### 3.5.1 계산 기록
- **History 버튼**: 상단 우측 아이콘
- **기록 패널**: 슬라이드 인 패널로 이전 계산 표시
- **기록 관리**: 삭제, 재사용 기능

#### 3.5.2 메뉴
- **Menu 버튼**: 상단 좌측 아이콘
- **설정 옵션**:
  - 다크모드 수동 전환
  - 각도 단위 기본값 설정
  - 소수점 자릿수 설정
  - 계산 기록 저장 여부

#### 3.5.3 키보드 지원
- **숫자 키**: 0-9
- **연산자**: +, -, *, /
- **Enter**: = (계산 실행)
- **Backspace**: 삭제
- **Escape**: AC (전체 삭제)

## 4. 기술 요구사항

### 4.1 기술 스택

#### 4.1.1 프론트엔드
- **HTML5**: 시맨틱 마크업
- **CSS3**: 
  - Tailwind CSS (v3.x) - 유틸리티 우선 스타일링
  - Custom CSS - 스크롤바, 애니메이션 등
- **JavaScript (ES6+)**: 
  - 바닐라 JS 또는 React/Vue (선택)
  - 계산 로직 구현

#### 4.1.2 외부 라이브러리
- **Math.js** 또는 **Decimal.js**: 정밀 계산
- **Google Fonts**: Space Grotesk 폰트
- **Material Symbols**: 아이콘 (menu, history, backspace)

#### 4.1.3 빌드 도구 (선택사항)
- **Vite** 또는 **Webpack**: 번들링
- **PostCSS**: CSS 처리
- **ESLint/Prettier**: 코드 품질 관리

### 4.2 성능 요구사항
- **초기 로딩**: < 2초
- **계산 응답 시간**: < 100ms
- **애니메이션 프레임레이트**: 60fps
- **번들 크기**: < 500KB (gzip 압축 후)

### 4.3 브라우저 호환성
- **Chrome**: 최신 버전 및 이전 2개 버전
- **Firefox**: 최신 버전 및 이전 2개 버전
- **Safari**: 최신 버전 및 이전 2개 버전
- **Edge**: 최신 버전 및 이전 2개 버전
- **모바일 브라우저**: iOS Safari, Chrome Mobile

### 4.4 접근성 (Accessibility)
- **WCAG 2.1 Level AA** 준수
- **키보드 네비게이션**: 모든 기능 키보드로 접근 가능
- **스크린 리더**: ARIA 레이블 및 역할 정의
- **색상 대비**: 최소 4.5:1 비율 유지
- **포커스 표시**: 명확한 포커스 인디케이터

## 5. 계산 로직 요구사항

### 5.1 연산 우선순위
1. 괄호 `( )`
2. 함수 (sin, cos, tan, log, ln, x²)
3. 곱셈 `×`, 나눗셈 `÷`
4. 덧셈 `+`, 뺄셈 `−`

### 5.2 정밀도
- **소수점 자릿수**: 최대 15자리
- **과학적 표기법**: 1e+10 이상 또는 1e-10 이하
- **반올림**: IEEE 754 표준 준수

### 5.3 에러 처리
- **0으로 나누기**: "Error: Division by zero"
- **잘못된 입력**: "Error: Invalid expression"
- **범위 초과**: "Error: Number too large"
- **도메인 오류**: "Error: Math domain error" (예: log(-1))

### 5.4 각도 모드
- **DEG (Degree)**: 0° ~ 360°
- **RAD (Radian)**: 0 ~ 2π
- **GRAD (Gradian)**: 0 ~ 400 (선택사항)

## 6. 사용자 스토리

### 6.1 기본 계산
> **As a** 학생  
> **I want to** 간단한 사칙연산을 수행하고  
> **So that** 빠르게 숙제 문제를 풀 수 있다

**Acceptance Criteria:**
- 숫자 버튼 클릭 시 디스플레이에 표시
- 연산자 선택 후 두 번째 숫자 입력 가능
- = 버튼 클릭 시 정확한 결과 표시
- AC 버튼으로 초기화 가능

### 6.2 공학용 계산
> **As an** 엔지니어  
> **I want to** 삼각함수와 로그 계산을 수행하고  
> **So that** 설계 작업에 필요한 값을 구할 수 있다

**Acceptance Criteria:**
- sin, cos, tan 버튼으로 삼각함수 계산
- 각도 모드 (DEG/RAD) 전환 가능
- log, ln 버튼으로 로그 계산
- 괄호를 사용한 복잡한 수식 입력 가능

### 6.3 다크모드 사용
> **As a** 야간 작업자  
> **I want to** 다크모드에서 계산기를 사용하고  
> **So that** 눈의 피로를 줄일 수 있다

**Acceptance Criteria:**
- 시스템 다크모드 설정 자동 감지
- 다크모드에서 모든 요소가 명확하게 보임
- 색상 대비가 접근성 기준 충족

### 6.4 모바일 사용
> **As a** 모바일 사용자  
> **I want to** 스마트폰에서 계산기를 사용하고  
> **So that** 언제 어디서나 계산할 수 있다

**Acceptance Criteria:**
- 모바일 화면에 최적화된 레이아웃
- 터치 인터랙션이 부드럽게 작동
- 버튼 크기가 터치하기 적절함 (최소 44x44px)
- 가로/세로 모드 모두 지원

### 6.5 계산 기록 확인
> **As a** 연구원  
> **I want to** 이전 계산 결과를 확인하고  
> **So that** 계산 과정을 검증할 수 있다

**Acceptance Criteria:**
- History 버튼으로 기록 패널 열기
- 최근 계산 목록 표시
- 기록 항목 클릭 시 재사용 가능
- 기록 삭제 기능

## 7. 비기능 요구사항

### 7.1 사용성
- **학습 곡선**: 5분 이내 기본 기능 습득
- **직관성**: 별도 설명 없이 사용 가능한 UI
- **일관성**: 모든 플랫폼에서 동일한 UX

### 7.2 신뢰성
- **가용성**: 99.9% 업타임 (웹 호스팅 기준)
- **정확성**: 표준 계산기와 동일한 결과
- **오류 복구**: 오류 발생 시 명확한 메시지 표시

### 7.3 유지보수성
- **코드 품질**: ESLint 규칙 준수
- **문서화**: 주요 함수 및 컴포넌트 주석
- **테스트**: 단위 테스트 커버리지 80% 이상

### 7.4 보안
- **XSS 방지**: 사용자 입력 검증 및 이스케이프
- **CSP**: Content Security Policy 적용
- **HTTPS**: 프로덕션 환경에서 필수

## 8. 개발 로드맵

### 8.1 Phase 1: MVP (4주)
**Week 1-2: 기본 UI 구현**
- [ ] HTML 구조 작성
- [ ] Tailwind CSS 설정 및 스타일링
- [ ] 반응형 레이아웃 구현
- [ ] 다크모드 구현

**Week 3-4: 계산 로직 구현**
- [ ] 기본 사칙연산 구현
- [ ] 숫자 입력 및 디스플레이 로직
- [ ] AC, Backspace 기능
- [ ] = 버튼 계산 실행

### 8.2 Phase 2: 공학용 기능 (3주)
**Week 5-6: 공학 함수**
- [ ] 삼각함수 (sin, cos, tan) 구현
- [ ] 로그 함수 (log, ln) 구현
- [ ] 제곱 (x²) 및 상수 (π) 구현
- [ ] 각도 모드 전환 (DEG/RAD)

**Week 7: 괄호 및 복잡한 수식**
- [ ] 괄호 처리 로직
- [ ] 연산 우선순위 구현
- [ ] 수식 파싱 및 평가

### 8.3 Phase 3: 고급 기능 (2주)
**Week 8: 계산 기록**
- [ ] History 패널 UI
- [ ] 로컬 스토리지 저장
- [ ] 기록 재사용 기능

**Week 9: 추가 기능 및 최적화**
- [ ] 키보드 지원
- [ ] 애니메이션 최적화
- [ ] 성능 튜닝

### 8.4 Phase 4: 테스트 및 배포 (1주)
**Week 10: QA 및 배포**
- [ ] 단위 테스트 작성
- [ ] 크로스 브라우저 테스트
- [ ] 접근성 검증
- [ ] 프로덕션 배포

## 9. 테스트 계획

### 9.1 단위 테스트
- **계산 함수**: 모든 연산자 및 함수 테스트
- **입력 검증**: 유효성 검사 로직 테스트
- **에러 처리**: 예외 상황 테스트

### 9.2 통합 테스트
- **UI 인터랙션**: 버튼 클릭 및 입력 흐름
- **계산 파이프라인**: 입력 → 파싱 → 계산 → 표시
- **모드 전환**: 다크모드, 각도 모드 전환

### 9.3 수동 UI 테스트
- **UI 기능 테스트**: 버튼 클릭, 키보드 입력, 다크모드 등
- **크로스 브라우저 테스트**: Chrome, Firefox, Safari, Edge, 모바일
- **접근성 테스트**: 키보드 네비게이션, 스크린 리더, 색상 대비
- **성능 테스트**: Lighthouse 점수 확인

> **참고**: 코어 로직(계산 엔진, 상태 관리)은 TDD로 자동화 테스트하고, UI는 수동으로 테스트합니다.

### 9.4 테스트 케이스 예시

#### 기본 연산
```
Input: 2 + 3
Expected: 5

Input: 10 - 7
Expected: 3

Input: 4 × 5
Expected: 20

Input: 15 ÷ 3
Expected: 5
```

#### 공학 함수
```
Input: sin(30) [DEG mode]
Expected: 0.5

Input: cos(0) [RAD mode]
Expected: 1

Input: log(100)
Expected: 2

Input: ln(e) [where e ≈ 2.71828]
Expected: 1
```

#### 복잡한 수식
```
Input: (12 + 5) × sin(30)
Expected: 8.5

Input: 2 × π
Expected: 6.283185307...

Input: (10 + 5) ÷ 3
Expected: 5
```

#### 에러 케이스
```
Input: 5 ÷ 0
Expected: Error: Division by zero

Input: log(-1)
Expected: Error: Math domain error

Input: 2 + + 3
Expected: Error: Invalid expression
```

## 10. 배포 및 운영

### 10.1 호스팅
- **정적 호스팅**: Vercel, Netlify, GitHub Pages
- **CDN**: Cloudflare 또는 호스팅 제공 CDN
- **도메인**: calculator.example.com (예시)

### 10.2 모니터링
- **분석**: Google Analytics 또는 Plausible
- **에러 추적**: Sentry 또는 LogRocket
- **성능 모니터링**: Lighthouse CI

### 10.3 유지보수
- **버그 수정**: 2주 단위 패치 릴리스
- **기능 추가**: 분기별 마이너 업데이트
- **보안 업데이트**: 즉시 적용

## 11. 참고 자료

### 11.1 디자인 파일
- **HTML 프로토타입**: `docs/stitch_scientific_calculator/code.html`
- **스크린샷**: `docs/stitch_scientific_calculator/screen.png`

### 11.2 외부 리소스
- **Tailwind CSS 문서**: https://tailwindcss.com/docs
- **Math.js 문서**: https://mathjs.org/docs
- **Material Symbols**: https://fonts.google.com/icons
- **WCAG 가이드라인**: https://www.w3.org/WAI/WCAG21/quickref/

### 11.3 유사 제품 분석
- **Google Calculator**: 검색 엔진 내장 계산기
- **Desmos Scientific Calculator**: 웹 기반 공학용 계산기
- **Calculator.net**: 다양한 계산기 모음

## 12. 부록

### 12.1 용어 정의
- **DEG (Degree)**: 각도 단위 - 도
- **RAD (Radian)**: 각도 단위 - 라디안
- **ANS (Answer)**: 이전 계산 결과
- **AC (All Clear)**: 전체 삭제
- **Backspace**: 마지막 입력 삭제

### 12.2 수식 표기법
- **중위 표기법**: 일반적인 수식 표기 (예: 2 + 3)
- **연산자 우선순위**: 괄호 > 함수 > 곱셈/나눗셈 > 덧셈/뺄셈

### 12.3 변경 이력
| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|-----------|--------|
| 1.0 | 2025-12-23 | 초기 PRD 작성 | - |

---

**문서 승인**
- [ ] 제품 매니저
- [ ] 개발 리드
- [ ] 디자이너
- [ ] QA 리드
